import{_ as m,o,c as d,a as t,t as n,r as p,b as l,d as h,w as f,e as b,v,i as E,F as g,f as y,g as $,h as O,j as _}from"./index.ba3d4dca.js";const L={emits:["remove"],props:["id","entidade"],methods:{remove(e){this.$emit("remove",e)}}},A=["id"],C={class:"modal-dialog"},R={class:"modal-content"},x=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"ATEN\xC7\xC3O!"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),k={class:"modal-body"},w=t("h5",null,"Tem certeza que deseja excluir o item a seguir?",-1),F={class:"modal-footer"},T=t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);function N(e,s,i,c,a,r){return o(),d("div",{class:"modal fade",id:i.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",C,[t("div",R,[x,t("div",k,[w,t("p",null,"Titulo: "+n(i.entidade.title),1)]),t("div",F,[T,t("button",{type:"button",class:"btn btn-primary","data-dismiss":"modal",onClick:s[0]||(s[0]=u=>r.remove(i.entidade))}," Save changes ")])])])],8,A)}var V=m(L,[["render",N]]);const M={class:"content"},P={class:"container-fluid"},j={class:"row"},D={class:"col-lg-10"},B={key:0},I=_("cadastar"),S=t("button",{class:"btn bt-sm btn-info"},"Pesquisar",-1),U={key:1,class:"text-center clearfix"},q=t("i",{class:"fa fa-spinner fa-spin fa-4x fa-fw"},null,-1),H=[q],Z={class:"table table-bordered"},z=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"FOCO"),t("th",{scope:"col"},"DATA REALIZA\xC7\xC3O"),t("th",{scope:"col"},"A\xC7\xC3O")])],-1),G={cod:"row"},J={class:"botao-acao"},K=["onClick"],Q=t("i",{class:"fa fa-edit"},null,-1),W=[Q],X=_(" "+n(" ")+" "),Y=["onClick"],tt=t("i",{class:"fa fa-minus-circle"},null,-1),et=[tt],st={inject:["usuarioProvider"],data(){return{entidade:{},indiceArray:"",usuarioProviderRecebido:this.usuarioProvider,listaEntidades:[],titulo:"",buscaEntidade:"",isErroResposta:!1,isLoading:!0}},mounted(){this.carregarLista()},beforeUpdate(){this.incluirEntidade()},computed:{listaEntidadesFiltrada:{get:function(){return this.listaEntidades.filter(function(e){return this.buscaEntidade!=""?e.FOCO.toLowerCase().indexOf(this.buscaEntidade.toLowerCase())>-1:!0},this)},set:function(e){this.listaEntidades=e}}},methods:{preparaRemocao(e,s){this.entidade=e,this.indiceArray=s},remove(e){this.indiceArray>-1&&this.listaEntidades.splice(this.indiceArray,1)},carregarLista(){$.get("/api/folha").then(e=>{this.listaEntidades=e.data}).catch(e=>{e.response.status===401&&this.$router.push({name:"login"}),this.isErroResposta=!0}).finally(()=>{this.isLoading=!1})},direcionaParaEdicao:function(e){this.$router.push({name:"/lista/cadastro",params:{id:e.id}})},prepararEdicaoLista(){typeof this.$route.params.entidade=="string"&&(this.entidade=this.$route.params.entidade,this.entidade=JSON.parse(this.entidade),this.editarEntidade(this.entidade))},editarEntidade(e){if(typeof e=="object"){const s=this.listaEntidades.indexOf(e);this.listaEntidades[s]=e,this.listaEntidades[s]=e}},incluirEntidade(){typeof this.$route.params.entidade=="string"&&(this.entidade=this.$route.params.entidade,this.listaEntidades.push(this.entidade))}}},it=Object.assign(st,{__name:"ListaView",setup(e){return(s,i)=>{const c=p("RouterLink");return o(),d("div",null,[l(O,{msg:"Folha de Produtividade"}),t("div",M,[t("div",P,[t("div",j,[t("div",D,[s.isErroResposta?(o(),d("div",B,"HOUVE ERRO NO CARREGAMENTO! Tente novamente")):h("",!0),l(c,{to:"/lista/cadastro",class:"btn btn-primary float-right d-none d-sm-inline"},{default:f(()=>[I]),_:1}),b(t("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=a=>E(buscaEntidade)?buscaEntidade.value=a:null)},null,512),[[v,s.buscaEntidade]]),S,s.isLoading?(o(),d("div",U,H)):h("",!0),t("table",Z,[z,t("tbody",null,[(o(!0),d(g,null,y(s.listaEntidadesFiltrada,(a,r)=>(o(),d("tr",null,[t("th",G,n(a.IDFOLHA),1),t("td",null,n(a.FOCO),1),t("td",null,n(a.DTAREALIZACAO),1),t("td",J,[t("button",{class:"btn btn-info",title:"Editar",onClick:u=>s.direcionaParaEdicao(a)},W,8,K),X,t("button",{type:"button",class:"btn bt-sm btn-danger float-right","data-toggle":"modal","data-target":"#exampleModal02",onClick:u=>s.preparaRemocao(a,r)},et,8,Y)])]))),256))])]),l(V,{id:"exampleModal02",entidade:s.entidade,onRemove:i[1]||(i[1]=a=>s.remove(a))},null,8,["entidade"])])])])])])}}});export{it as default};
